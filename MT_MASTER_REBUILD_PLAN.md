# 🎯 MT MASTER REBUILD PLAN
**Mundo Tango ESA LIFE CEO - Complete Restoration Roadmap**

**Date:** October 18, 2025 5:30 AM  
**Methodology:** MB.MD (Mapping → Breakdown → Mitigation → Deployment)  
**THIS IS YOUR NORTH STAR DOCUMENT**

---

## 📋 **EXECUTIVE SUMMARY**

**Current Status:**
- Phase 0: Agent Prep ✅ 100% COMPLETE (26 hours)
- Phase 3: Database Optimization ✅ 100% COMPLETE (2 hours)
- Phase 11: Backend Completion ✅ 100% COMPLETE (5 hours)
- 123/276 agents operational (44.6%)
- Journey orchestration live (J1-J4)
- Production build ready (backend hardened)
- Database optimized (13 indexes, <0.1ms queries)
- Server on port 5000

**Next Step:** Phase 10 - Frontend Polish OR Phase 12 - Integration Testing

**Total Estimated Time to Production:** 40-50 hours remaining

---

## 🎯 **THE ROADMAP: Two Complementary Systems**

### **System A: Technical Foundation (MB.MD Sequence)**
*This is our PRIMARY execution path - builds the technical foundation first*

```
Phase 0: Agent Preparation          ✅ 100% COMPLETE (26 hrs)
  ├─ Agent coordinator updated      ✅
  ├─ Documentation created          ✅
  ├─ Naming fixed (146 files)       ✅
  ├─ Page agents wired (125+)       ✅
  └─ Journey orchestration (J1-J4)  ✅

Phase 3: Database Optimization      ✅ 100% COMPLETE (2 hrs)
  ├─ Schema review & optimization   ✅
  ├─ Index creation (13 indexes)    ✅
  ├─ Migration cleanup              ✅
  └─ Journey schema pushed          ✅

Phase 11: Backend Completion        ✅ 100% COMPLETE (5 hrs)
  ├─ Global error handler           ✅
  ├─ Authentication hardened        ✅
  ├─ Token refresh system           ✅
  ├─ WebSocket heartbeat & rooms    ✅
  └─ API optimization started       ✅

Phase 10: Frontend Polish           ⚠️ 70% (10-12 hrs)
  ├─ Component optimization
  ├─ State management cleanup
  ├─ Performance improvements
  └─ Mobile responsiveness

Phase 12: Integration Testing       ⚠️ 75% (3-4 hrs)
  ├─ End-to-end testing
  ├─ API integration tests
  ├─ WebSocket testing
  └─ Journey flow testing

Phase 14: Comprehensive Testing     ❌ 30% (8-10 hrs)
  ├─ Unit tests
  ├─ Integration tests
  ├─ E2E tests (Playwright)
  └─ Load testing

Phase 16: Security Hardening        ⚠️ 60% (4-5 hrs)
  ├─ CSRF protection
  ├─ Rate limiting
  ├─ Input validation
  └─ Security audit

Phase 17: Production Deployment     ✅ Configured (2 hrs)
  ├─ Reserved VM configured
  ├─ Environment setup
  ├─ Deploy to production
  └─ Monitor & verify
```

**Estimated:** 40-50 hours to production deployment

---

### **System B: User Journey Features (UI Build)**
*These features are built ALONGSIDE the technical foundation*

```
Phase 1: Foundation & Auth          ⚠️ 70% (4-6 hrs)
  ├─ Login/Signup flows
  ├─ Replit OAuth
  ├─ Profile setup
  └─ Onboarding wizard (J1)

Phase 2: Core UX                    ⚠️ 75% (6-8 hrs)
  ├─ Home feed
  ├─ Memory creation
  ├─ Navigation
  └─ Basic interactions (J2)

Phase 3: Social Features            ⚠️ 60% (5-7 hrs)
  ├─ Connections/Following
  ├─ Groups & Communities
  ├─ Events system
  └─ Messaging (J2/J3)

Phase 4: Advanced Features          ❌ 20% (10-12 hrs)
  ├─ AI content enhancement
  ├─ Smart recommendations
  ├─ Advanced search
  └─ Analytics dashboard (J3)

Phase 5: Admin & Platform           ⚠️ 50% (6-8 hrs)
  ├─ Super admin dashboard
  ├─ User management
  ├─ Platform analytics
  └─ Agent monitoring (J4)
```

**Estimated:** 31-43 hours for full UI feature set

---

## 🚀 **CUSTOMER JOURNEYS: Beyond J1-J4**

### **Current Implementation: Core 4 Journeys** ✅

**J1: New User Journey** (Days 1-7)
- Target: Just registered, learning the ropes
- Agent: Onboarding guide
- Features: Profile setup, first connection, first memory
- Graduation: Complete onboarding, 1+ memory, 1+ connection, 7+ days

**J2: Active User Journey** (Weeks 2-8)
- Target: Regular engagement, building network
- Agent: Engagement coach
- Features: Feed exploration, events, groups
- Graduation: 50+ memories, 50+ connections, 3+ events organized

**J3: Power User Journey** (Months 2+)
- Target: Content creators, community leaders
- Agent: Leadership mentor
- Features: Event organization, AI tools, analytics
- Graduation: Promoted to super admin

**J4: Super Admin Journey**
- Target: Platform administrators
- Agent: Platform orchestrator
- Features: ESA Mind Map, Visual Editor, full platform access
- No graduation (highest level)

---

### **Future Journeys: To Be Implemented** 🔜

**Geographic Journeys:**
- **J5: Local Community Leader** - Leads city-specific tango group
- **J6: Regional Ambassador** - Coordinates multiple cities
- **J7: Global Connector** - International community building

**Role-Based Journeys:**
- **J8: Dancer Journey** - Focus on classes, social events, technique
- **J9: Organizer Journey** - Event planning, venue management
- **J10: Instructor Journey** - Teaching tools, student tracking
- **J11: DJ Journey** - Music collection, event playlists

**Engagement Journeys:**
- **J12: Casual Browser** - Occasional visitor, minimal engagement
- **J13: Content Consumer** - Reads/watches, rarely posts
- **J14: Social Butterfly** - High social interaction, moderate content
- **J15: Content Creator** - Regular poster, thought leader

**Special Journeys:**
- **J16: Festival Attendee** - Preparing for/attending major events
- **J17: Brand Partner** - Business/sponsor journey
- **J18: Volunteer** - Community contributor, moderator
- **J19: Beta Tester** - Early adopter, feature testing
- **J20: Alumni/Returning** - Was active, came back

**Total Future Journeys:** 16 additional (J5-J20)  
**Implementation:** Phases 4-5 (10-15 hours)

---

## 📊 **AGENT BUILD SCHEDULE**

**Current:** 120/276 agents operational (43.5%)

### **Phase 3-5: Core Foundation** (Next 10-15 hrs)
- Life CEO AI Agents (16): Health, Finance, Career, etc.
- Algorithm Agents (10): Feed ranking, recommendations
- ESA Infrastructure (remaining): As features built

### **Phase 10-12: Feature Completion** (15-20 hrs)
- Page Agents (125+): Created with each page/route
- Specialized Services (10): Email, SMS, media processing

### **Phase 14-16: Pre-Launch** (10-15 hrs)
- App Architecture Leads (6): Technical coordination
- Marketing Agents (5): Launch campaigns, growth
- Testing Agents: Quality assurance

**Total Remaining:** 156 agents  
**Estimated Time:** 35-50 hours

---

## 🗺️ **MB.MD METHODOLOGY - HOW WE WORK**

### **Every Task Follows This Flow:**

**1. MAPPING (15-20% of time)**
- Analyze current state
- Identify what exists vs. what's needed
- Review dependencies & constraints
- Document the "why" before the "how"
- **Output:** Mapping document (e.g., PHASE0_TASK05_MBMD_MAPPING.md)

**2. BREAKDOWN (10-15% of time)**
- Split large tasks into smaller steps
- Define clear success criteria
- Identify risks & edge cases
- Create task checklist
- **Output:** Task list in this tool

**3. MITIGATION (60-70% of time)**
- Implement the solution
- Address risks proactively
- Add error handling & fallbacks
- Test as you build
- **Output:** Working code, tests

**4. DEPLOYMENT (5-10% of time)**
- Deploy/activate the feature
- Verify it works in production
- Update documentation
- Call architect for review
- **Output:** Production-ready feature ✅

---

## 🎯 **DEPLOYMENT STRATEGY**

### **Current Deployment Configuration** ✅

**Platform:** Replit Reserved VM  
**Type:** Always-on server (not Autoscale)  
**Reason:** WebSocket support, agent orchestration needs persistent connections

**Configuration:**
```javascript
{
  deploymentTarget: "vm",
  run: ["npm", "start"],
  build: ["npm", "run", "build"]
}
```

**Status:**
- ✅ Production build works (vite.config.ts configured)
- ✅ Reserved VM deployment configured
- ✅ Port 5000 (frontend + backend on same port)
- ⏸️ Ready to deploy after Phase 14 (Testing) complete

### **Pre-Deployment Checklist**

Before clicking "Publish":
- [ ] Phase 14: Testing complete (all tests passing)
- [ ] Phase 16: Security audit complete
- [ ] Environment variables set in production
- [ ] Database migrations applied
- [ ] Static assets optimized
- [ ] Error tracking configured (PostHog)
- [ ] SSL certificate verified
- [ ] Custom domain configured (if applicable)

**Estimated Deployment Time:** 30 minutes - 2 hours

---

## 🚨 **CRITICAL RULES (Never Break These)**

1. **ALWAYS check this document** before starting work
2. **NEVER skip phases** - They build on each other
3. **ALWAYS use MB.MD** methodology for new tasks
4. **NEVER deploy** without testing (Phase 14) complete
5. **ALWAYS call architect** before marking tasks complete
6. **NEVER delete master documents** (lessons learned!)
7. **ALWAYS update this document** when completing phases
8. **NEVER work on multiple phases** simultaneously
9. **ALWAYS commit to git** after significant changes
10. **NEVER compromise security** for speed

---

## 📚 **MASTER DOCUMENTS LIBRARY**

**North Star Documents** (Read these first):
1. **MT_MASTER_REBUILD_PLAN.md** ← YOU ARE HERE
2. **_MT_MASTER_GUIDELINE.md** - Detailed phase checklists
3. **WHERE_ARE_WE_NOW.md** - Current status snapshot

**Methodology Documents**:
4. **MB_MD_DEPLOYMENT_STRATEGY.md** - MB.MD process details
5. **MB_MD_CRITICAL_ANALYSIS.md** - Lessons learned

**Architecture Documents**:
6. **COMPLETE_AGENT_INVENTORY.md** - All 276 agents documented
7. **AGENT_ORG_CHART.md** - Agent hierarchy & interactions
8. **DEPLOYMENT_SOLUTION.md** - Reserved VM configuration

**Task Documentation** (Created per task):
9. **PHASE0_TASK05_MBMD_MAPPING.md** - Journey orchestration mapping
10. **PHASE0_TASK05_COMPLETE.md** - Journey implementation summary
11. **PHASE0_TASK04_PATTERN.md** - Page agent pattern
12. **replit.md** - Project overview & preferences

---

## ✅ **PHASE 0 RECAP: What We Accomplished**

**The Foundation is Set:**
- ✅ 120 agents operational across 13 categories
- ✅ Journey orchestration (J1-J4) with real database metrics
- ✅ Page agents wired to 125+ routes
- ✅ Documentation complete (276 agents cataloged)
- ✅ Naming conventions standardized (146 files updated)
- ✅ Production build working
- ✅ Database schema ready
- ✅ Deployment configured

**Why This Matters:**
Phase 0 was originally skipped, causing 3+ weeks of confusion. Now that it's complete, all future work has a solid foundation:
- Agents can see page context
- Journey flows guide users properly
- Visual Editor restricted to admins
- Mr Blue can orchestrate intelligently
- All code uses consistent naming

---

## 🎯 **NEXT STEPS: Phase 3 - Database**

**Start Here:**
1. Read WHERE_ARE_WE_NOW.md (current status)
2. Review Phase 3 tasks below
3. Use MB.MD methodology
4. Update this document when complete

**Phase 3 Tasks (2-3 hours):**
- [ ] Review all table schemas
- [ ] Add indexes for common queries
- [ ] Optimize join patterns
- [ ] Clean up migrations
- [ ] Push journey schema changes
- [ ] Verify performance improvements

**Success Criteria:**
- All queries < 100ms
- Indexes on foreign keys
- No N+1 query issues
- Journey state columns in production

---

## 📞 **IF YOU GET STUCK**

**Step 1:** Re-read this document  
**Step 2:** Check WHERE_ARE_WE_NOW.md  
**Step 3:** Review the specific phase documentation  
**Step 4:** Ask user for clarification  

**If tempted to skip ahead:**
Remember - Phase 0 was skipped originally and it cost 3 weeks. Trust the process!

---

## 🎊 **VISION: Where We're Going**

**6-Month Vision:**
- 10,000+ active tango dancers worldwide
- 276 AI agents fully operational
- 20 customer journeys (J1-J20) active
- Major tango festivals integrated
- Mobile apps (iOS + Android) via Capacitor
- Multi-language support (ES, EN, FR, IT, PT)
- Partnership with major festivals

**This rebuild gets us there - one phase at a time.**

---

**Last Updated:** October 18, 2025 5:30 AM  
**Maintained by:** Mundo Tango Development Team  
**Methodology:** MB.MD  
**Status:** Phase 0 Complete ✅ | Phase 3 Active ⏸️ | 40-50 hrs to production

---

*"First we build the foundation, then we build the future."*
