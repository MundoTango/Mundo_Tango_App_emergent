# ESA LIFE CEO 61x21 - Production Environment Configuration
# Copy this file to .env.production and configure with your actual values

# ============================================
# CORE CONFIGURATION
# ============================================

# Application
NODE_ENV=production
PORT=5000
HOST=0.0.0.0
APP_URL=https://mundotango.life
CORS_ORIGIN=https://mundotango.life
DEPLOYMENT_ID=prod-001
ALLOW_IFRAME=false

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL Database (Required)
DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000
DB_STATEMENT_TIMEOUT=30000
DB_SSL_REJECT_UNAUTHORIZED=true

# Redis Cache (Required for production)
REDIS_URL=redis://user:password@host:6379
REDIS_MAX_RETRIES=3
REDIS_CONNECTION_TIMEOUT=5000

# ============================================
# AUTHENTICATION & SECURITY
# ============================================

# Session & JWT (Required - Generate strong secrets!)
SESSION_SECRET=your-very-long-random-session-secret-min-64-chars
JWT_SECRET=your-very-long-random-jwt-secret-min-32-chars
CSRF_SECRET=your-csrf-secret-min-32-chars

# OAuth Providers (Optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Two-Factor Authentication
TWO_FACTOR_ISSUER=MundoTango

# ============================================
# SUPABASE CONFIGURATION (Required)
# ============================================

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-role-key

# ============================================
# PAYMENT PROCESSING
# ============================================

# Stripe (Required for payments)
STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_ID_BASIC=price_...
STRIPE_PRICE_ID_ENTHUSIAST=price_...
STRIPE_PRICE_ID_PROFESSIONAL=price_...
STRIPE_PRICE_ID_ENTERPRISE=price_...

# ============================================
# EMAIL SERVICES
# ============================================

# SendGrid (Primary email service)
SENDGRID_API_KEY=SG...
SENDGRID_FROM_EMAIL=noreply@mundotango.life
SENDGRID_REPLY_TO=support@mundotango.life

# Resend (Backup email service)
RESEND_API_KEY=re_...
RESEND_FROM_EMAIL=noreply@mundotango.life

# ============================================
# FILE STORAGE & CDN
# ============================================

# Cloudinary (Media storage)
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
CLOUDINARY_URL=cloudinary://api_key:api_secret@cloud_name

# CDN Configuration
CDN_ENABLED=true
CDN_URL=https://cdn.mundotango.life
CDN_PURGE_KEY=your-cdn-purge-key

# Upload limits
MAX_FILE_SIZE=104857600
MAX_FILES_PER_UPLOAD=10

# ============================================
# AI & INTEGRATIONS
# ============================================

# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000

# Notion Integration
NOTION_API_KEY=secret_...
NOTION_DATABASE_ID=your-database-id

# Google Maps
GOOGLE_MAPS_API_KEY=AIza...

# ============================================
# MONITORING & ANALYTICS
# ============================================

# Sentry (Error tracking)
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics
GOOGLE_ANALYTICS_ID=G-...
PLAUSIBLE_DOMAIN=mundotango.life

# Monitoring
HEALTH_CHECK_URL=https://mundotango.life/health
MONITORING_WEBHOOK=https://your-monitoring-service/webhook
METRICS_PORT=9090
ENABLE_APM=true

# ============================================
# RATE LIMITING
# ============================================

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_UPLOAD_MAX=10
RATE_LIMIT_PAYMENT_MAX=3

# ============================================
# FEATURE FLAGS
# ============================================

ENABLE_SIGNUP=true
ENABLE_SOCIAL_LOGIN=true
ENABLE_PAYMENTS=true
ENABLE_NOTIFICATIONS=true
ENABLE_ANALYTICS=true
ENABLE_MAINTENANCE_MODE=false
ENABLE_DEBUG_MODE=false

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================

BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=mundotango-backups
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# ============================================
# LOGGING
# ============================================

LOG_LEVEL=info
LOG_FORMAT=json
LOG_ROTATION_MAX_SIZE=100m
LOG_ROTATION_MAX_FILES=10
LOG_ROTATION_MAX_AGE=30d

# ============================================
# PERFORMANCE
# ============================================

NODE_OPTIONS=--max-old-space-size=2048
CLUSTER_WORKERS=auto
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# ============================================
# EXTERNAL SERVICES
# ============================================

# Twilio (SMS notifications)
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_PHONE_NUMBER=+1...

# Push Notifications
FCM_SERVER_KEY=...
APNS_KEY_ID=...
APNS_TEAM_ID=...

# Social Media
FACEBOOK_APP_ID=...
TWITTER_API_KEY=...
INSTAGRAM_CLIENT_ID=...

# ============================================
# TESTING (Do not use in production)
# ============================================

# AUTH_BYPASS=false
# TEST_DATABASE_URL=
# ENABLE_TEST_ENDPOINTS=false